{"ast":null,"code":"var _jsxFileName = \"C:\\\\Tutorial_brillio\\\\client\\\\src\\\\components\\\\login.component.js\";\nimport React, { useState, useEffect } from \"react\";\nimport Form from \"react-validation/build/form\";\nimport Input from \"react-validation/build/input\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { loginUser, setLoggedIn } from \"../redux/actions/authActions\";\nimport Axios from \"axios\";\nimport setAuthToken from \"../redux/utils/setAuthToken\";\nimport jwt_decode from \"jwt-decode\";\n\nfunction Login(props) {\n  const [state, setState] = useState({\n    email: \"\",\n    password: \"\"\n  });\n  const [errors, setErrors] = useState({});\n  const dispatch = useDispatch();\n  const isAuth = useSelector(state => state.auth.isAuthenticated); // const isLoggedIn = useSelector(state => state.auth);\n\n  useEffect(() => {\n    setState({\n      email: \"\",\n      password: \"\"\n    });\n\n    if (isAuth) {\n      props.history.push(\"/dashboard\");\n      dispatch(setLoggedIn(true));\n    }\n  }, [isAuth]);\n\n  const handleChange = async e => {\n    await setState({ ...state,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    const userData = {\n      email: state.email,\n      password: state.password\n    };\n    Axios.post(\"/api/users/login\", userData).then(res => {\n      const {\n        token\n      } = res.data;\n      localStorage.setItem(\"jwtToken\", token);\n      setAuthToken(true);\n      const decoded = jwt_decode(token);\n      dispatch(loginUser(decoded));\n      dispatch(setLoggedIn(true));\n    }).catch(err => {\n      setErrors(err.response.data);\n    });\n  };\n\n  return React.createElement(\"div\", {\n    className: \"col-md-12\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"card card-container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: \"//ssl.gstatic.com/accounts/ui/avatar_2x.png\",\n    alt: \"profile-img\",\n    className: \"profile-img-card\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  }), React.createElement(Form, {\n    onSubmit: handleSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    htmlFor: \"username\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }, \"Username\"), React.createElement(Input, {\n    className: \"form-control\",\n    onChange: handleChange,\n    value: state.email,\n    name: \"email\",\n    id: \"email\",\n    type: \"email\",\n    placeholder: \"Email\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }), React.createElement(\"p\", {\n    className: \"input-error\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, errors.email || errors.emailNotFound)), React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    htmlFor: \"password\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }, \"Password\"), React.createElement(Input, {\n    className: \"form-control\",\n    onChange: handleChange,\n    value: state.password,\n    name: \"password\",\n    id: \"password\",\n    type: \"password\",\n    autocomplete: \"new-password\",\n    placeholder: \"Password\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }), React.createElement(\"p\", {\n    className: \"input-error\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102\n    },\n    __self: this\n  }, errors.password || errors.passwordIncorrect)), React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"btn btn-primary btn-block\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  }, \"Login\"))))));\n}\n\nexport default Login;","map":{"version":3,"sources":["C:/Tutorial_brillio/client/src/components/login.component.js"],"names":["React","useState","useEffect","Form","Input","useDispatch","useSelector","loginUser","setLoggedIn","Axios","setAuthToken","jwt_decode","Login","props","state","setState","email","password","errors","setErrors","dispatch","isAuth","auth","isAuthenticated","history","push","handleChange","e","target","name","value","handleSubmit","preventDefault","userData","post","then","res","token","data","localStorage","setItem","decoded","catch","err","response","emailNotFound","passwordIncorrect"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport Form from \"react-validation/build/form\";\r\nimport Input from \"react-validation/build/input\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { loginUser, setLoggedIn } from \"../redux/actions/authActions\";\r\nimport Axios from \"axios\";\r\nimport setAuthToken from \"../redux/utils/setAuthToken\";\r\nimport jwt_decode from \"jwt-decode\";\r\n\r\n\r\nfunction Login(props) {\r\n\r\n  const [state, setState] = useState({\r\n    email: \"\",\r\n    password: \"\",\r\n });\r\n const [errors, setErrors] = useState({});\r\n const dispatch = useDispatch();\r\n\r\n const isAuth = useSelector(state => state.auth.isAuthenticated);\r\n // const isLoggedIn = useSelector(state => state.auth);\r\n\r\n useEffect(() => {\r\n    setState({\r\n       email: \"\",\r\n       password: \"\",\r\n    });\r\n    if (isAuth) {\r\n       props.history.push(\"/dashboard\");\r\n       dispatch(setLoggedIn(true));\r\n    }\r\n }, [isAuth]);\r\n\r\n const handleChange = async e => {\r\n    await setState({\r\n       ...state,\r\n       [e.target.name]: e.target.value,\r\n    });\r\n };\r\n\r\n const handleSubmit = e => {\r\n    e.preventDefault();\r\n    const userData = {\r\n       email: state.email,\r\n       password: state.password,\r\n    };\r\n\r\n    Axios.post(\"/api/users/login\", userData)\r\n       .then(res => {\r\n          const { token } = res.data;\r\n          localStorage.setItem(\"jwtToken\", token);\r\n\r\n          setAuthToken(true);\r\n\r\n          const decoded = jwt_decode(token);\r\n          dispatch(loginUser(decoded));\r\n          dispatch(setLoggedIn(true));\r\n       })\r\n       .catch(err => {\r\n          setErrors(err.response.data);\r\n       });\r\n };\r\n \r\n    return (\r\n      <div className=\"col-md-12\">\r\n        <div className=\"card card-container\">\r\n          <img\r\n            src=\"//ssl.gstatic.com/accounts/ui/avatar_2x.png\"\r\n            alt=\"profile-img\"\r\n            className=\"profile-img-card\"\r\n          />\r\n\r\n          <Form onSubmit={handleSubmit}>\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"username\">Username</label>\r\n              <Input\r\n               className=\"form-control\"\r\n                onChange={handleChange}\r\n                value={state.email}\r\n                name=\"email\"\r\n                id=\"email\"\r\n                type=\"email\"\r\n                placeholder=\"Email\"\r\n              />\r\n              <p className=\"input-error\">\r\n               {errors.email || errors.emailNotFound}\r\n            </p>\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"password\">Password</label>\r\n              <Input\r\n               className=\"form-control\"\r\n               onChange={handleChange}\r\n               value={state.password}\r\n               name=\"password\"\r\n               id=\"password\"\r\n               type=\"password\"\r\n               autocomplete=\"new-password\"\r\n               placeholder=\"Password\"\r\n            />\r\n            <p className=\"input-error\">\r\n               {errors.password || errors.passwordIncorrect}\r\n            </p>\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n              <button type=\"submit\"\r\n                className=\"btn btn-primary btn-block\"\r\n              >\r\n                <span>Login</span>\r\n              </button>\r\n            </div>\r\n\r\n          </Form>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  export default Login;\r\n"]},"metadata":{},"sourceType":"module"}